<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PlacementIQ ‚Äî Career Readiness Assessment</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700;900&family=DM+Mono:wght@400;500&family=Nunito:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
:root {
  --bg: #0a0a0f;
  --bg2: #111118;
  --surface: #1a1a26;
  --surface2: #22223a;
  --gold: #f0c040;
  --gold2: #ffd700;
  --cyan: #00e5ff;
  --text: #f0ede8;
  --muted: #888899;
  --danger: #ff4d6d;
  --success: #00d68f;
  --border: rgba(240,192,64,0.15);
}

* { margin:0; padding:0; box-sizing:border-box; }

body {
  background: var(--bg);
  color: var(--text);
  font-family: 'Nunito', sans-serif;
  min-height: 100vh;
  overflow-x: hidden;
}

/* Animated background grid */
body::before {
  content: '';
  position: fixed;
  inset: 0;
  background-image: 
    linear-gradient(rgba(240,192,64,0.03) 1px, transparent 1px),
    linear-gradient(90deg, rgba(240,192,64,0.03) 1px, transparent 1px);
  background-size: 50px 50px;
  pointer-events: none;
  z-index: 0;
}

.noise {
  position: fixed;
  inset: 0;
  opacity: 0.025;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
  pointer-events: none;
  z-index: 0;
}

/* PAGES */
.page { display: none; min-height: 100vh; position: relative; z-index: 1; }
.page.active { display: flex; flex-direction: column; }

/* ============ LANDING ============ */
#page-landing {
  align-items: center;
  justify-content: center;
  padding: 60px 20px;
}

.landing-inner {
  display: flex;
  align-items: center;
  gap: 80px;
  max-width: 1100px;
  width: 100%;
}

.landing-text { flex: 1; }

.badge {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  background: rgba(240,192,64,0.1);
  border: 1px solid rgba(240,192,64,0.3);
  border-radius: 100px;
  padding: 6px 16px;
  font-family: 'DM Mono', monospace;
  font-size: 11px;
  color: var(--gold);
  letter-spacing: 2px;
  text-transform: uppercase;
  margin-bottom: 28px;
}

.badge::before {
  content: '';
  width: 7px; height: 7px;
  background: var(--gold);
  border-radius: 50%;
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0%, 100% { opacity: 1; transform: scale(1); }
  50% { opacity: 0.5; transform: scale(1.4); }
}

h1.headline {
  font-family: 'Playfair Display', serif;
  font-size: clamp(42px, 6vw, 72px);
  font-weight: 900;
  line-height: 1.05;
  margin-bottom: 24px;
}

h1.headline .accent { color: var(--gold); }

.landing-desc {
  font-size: 17px;
  line-height: 1.8;
  color: var(--muted);
  max-width: 460px;
  margin-bottom: 40px;
}

.stats-row {
  display: flex;
  gap: 32px;
  margin-bottom: 40px;
}

.stat { }
.stat-num {
  font-family: 'DM Mono', monospace;
  font-size: 28px;
  color: var(--gold);
  font-weight: 500;
}
.stat-label {
  font-size: 12px;
  color: var(--muted);
  text-transform: uppercase;
  letter-spacing: 1px;
}

.btn-primary {
  display: inline-flex;
  align-items: center;
  gap: 10px;
  background: var(--gold);
  color: #0a0a0f;
  font-family: 'Nunito', sans-serif;
  font-weight: 700;
  font-size: 16px;
  padding: 16px 36px;
  border-radius: 4px;
  border: none;
  cursor: pointer;
  transition: all 0.25s;
  text-decoration: none;
  letter-spacing: 0.5px;
}

.btn-primary:hover {
  background: var(--gold2);
  transform: translateY(-2px);
  box-shadow: 0 12px 40px rgba(240,192,64,0.35);
}

.btn-primary svg { transition: transform 0.2s; }
.btn-primary:hover svg { transform: translateX(4px); }

.landing-visual {
  flex: 0 0 360px;
}

.viz-card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 28px;
  position: relative;
  overflow: hidden;
}

.viz-card::before {
  content: '';
  position: absolute;
  top: -50%; left: -50%;
  width: 200%; height: 200%;
  background: radial-gradient(circle at 60% 40%, rgba(240,192,64,0.06) 0%, transparent 60%);
  pointer-events: none;
}

.viz-title {
  font-size: 11px;
  color: var(--muted);
  text-transform: uppercase;
  letter-spacing: 2px;
  font-family: 'DM Mono', monospace;
  margin-bottom: 20px;
}

.radar-container { position: relative; }

.radar-svg { width: 100%; max-width: 280px; display: block; margin: 0 auto; }

.skill-list { margin-top: 20px; display: flex; flex-direction: column; gap: 10px; }

.skill-item { display: flex; align-items: center; gap: 12px; }
.skill-name { font-size: 13px; color: var(--muted); width: 90px; }
.skill-bar { flex: 1; height: 6px; background: rgba(255,255,255,0.05); border-radius: 10px; overflow: hidden; }
.skill-fill {
  height: 100%;
  border-radius: 10px;
  background: linear-gradient(90deg, var(--gold), var(--cyan));
  animation: growBar 1.5s ease forwards;
  transform-origin: left;
}
@keyframes growBar { from { width: 0 !important; } }
.skill-pct { font-family: 'DM Mono', monospace; font-size: 12px; color: var(--gold); width: 35px; text-align: right; }

@media (max-width: 900px) {
  .landing-inner { flex-direction: column; }
  .landing-visual { display: none; }
}

/* ============ FORM PAGES ============ */
.form-page {
  align-items: center;
  justify-content: center;
  padding: 40px 20px;
}

.form-card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 20px;
  padding: 48px;
  width: 100%;
  max-width: 560px;
  position: relative;
  overflow: hidden;
}

.form-card::before {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 3px;
  background: linear-gradient(90deg, var(--gold), var(--cyan), var(--gold));
  background-size: 200%;
  animation: shimmer 3s linear infinite;
}

@keyframes shimmer { 0% { background-position: 0% } 100% { background-position: 200% } }

.step-indicator {
  display: flex;
  gap: 8px;
  margin-bottom: 36px;
}

.step-dot {
  height: 4px;
  border-radius: 2px;
  transition: all 0.4s;
  background: var(--surface2);
}

.step-dot.active { background: var(--gold); }
.step-dot.done { background: rgba(240,192,64,0.4); }

.form-heading {
  font-family: 'Playfair Display', serif;
  font-size: 28px;
  font-weight: 700;
  margin-bottom: 8px;
}

.form-sub {
  color: var(--muted);
  font-size: 14px;
  margin-bottom: 32px;
}

.field-group { margin-bottom: 20px; }

.field-label {
  display: block;
  font-size: 12px;
  font-family: 'DM Mono', monospace;
  color: var(--muted);
  text-transform: uppercase;
  letter-spacing: 1.5px;
  margin-bottom: 8px;
}

.field-input {
  width: 100%;
  background: var(--bg2);
  border: 1px solid rgba(255,255,255,0.08);
  border-radius: 8px;
  padding: 14px 16px;
  color: var(--text);
  font-family: 'Nunito', sans-serif;
  font-size: 15px;
  transition: all 0.2s;
  outline: none;
}

.field-input:focus {
  border-color: var(--gold);
  box-shadow: 0 0 0 3px rgba(240,192,64,0.1);
}

.field-input.error { border-color: var(--danger); }

.field-error {
  font-size: 12px;
  color: var(--danger);
  margin-top: 6px;
  display: none;
}

.field-error.show { display: block; }

.field-row { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }

select.field-input { appearance: none; cursor: pointer; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%23888899' stroke-width='2'%3E%3Cpolyline points='6 9 12 15 18 9'/%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right 14px center; }

select.field-input option { background: #1a1a26; }

/* ============ CAREER PAGE ============ */
#page-career { padding: 60px 20px; align-items: center; justify-content: center; }

.career-wrap { max-width: 900px; width: 100%; text-align: center; }

.career-wrap h2 {
  font-family: 'Playfair Display', serif;
  font-size: 36px;
  margin-bottom: 12px;
}

.career-wrap p { color: var(--muted); margin-bottom: 48px; }

.career-cards {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 20px;
}

.career-card {
  background: var(--surface);
  border: 2px solid transparent;
  border-radius: 16px;
  padding: 36px 24px;
  cursor: pointer;
  transition: all 0.3s;
  position: relative;
  overflow: hidden;
  text-align: left;
}

.career-card::before {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: 14px;
  border: 2px solid transparent;
  background: linear-gradient(135deg, var(--gold), var(--cyan)) border-box;
  -webkit-mask: linear-gradient(#fff 0 0) padding-box, linear-gradient(#fff 0 0);
  -webkit-mask-composite: destination-out;
  mask-composite: exclude;
  opacity: 0;
  transition: opacity 0.3s;
}

.career-card:hover::before,
.career-card.selected::before { opacity: 1; }

.career-card:hover, .career-card.selected {
  background: var(--surface2);
  transform: translateY(-4px);
  box-shadow: 0 20px 50px rgba(240,192,64,0.1);
}

.career-card.selected { background: rgba(240,192,64,0.06); }

.career-icon {
  width: 52px; height: 52px;
  border-radius: 12px;
  display: flex; align-items: center; justify-content: center;
  font-size: 26px;
  margin-bottom: 16px;
}

.career-card-title { font-size: 19px; font-weight: 700; margin-bottom: 8px; }
.career-card-desc { font-size: 13px; color: var(--muted); line-height: 1.6; }

.career-tags { display: flex; flex-wrap: wrap; gap: 6px; margin-top: 12px; }
.tag {
  font-family: 'DM Mono', monospace;
  font-size: 10px;
  padding: 3px 10px;
  border-radius: 100px;
  background: rgba(255,255,255,0.05);
  color: var(--muted);
  letter-spacing: 0.5px;
}

.career-cta { margin-top: 40px; }

@media (max-width: 700px) {
  .career-cards { grid-template-columns: 1fr; }
}

/* ============ ASSESSMENT ============ */
#page-assessment { padding: 40px 20px; }

.assessment-layout {
  max-width: 860px;
  margin: 0 auto;
  width: 100%;
}

.assessment-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 32px;
  padding: 20px 28px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 12px;
}

.assessment-meta { font-size: 13px; color: var(--muted); font-family: 'DM Mono', monospace; }
.assessment-meta strong { color: var(--text); display: block; font-size: 16px; margin-bottom: 2px; }

.progress-ring { position: relative; width: 64px; height: 64px; }
.progress-ring svg { transform: rotate(-90deg); }
.ring-bg { fill: none; stroke: var(--surface2); stroke-width: 4; }
.ring-fill { fill: none; stroke: var(--gold); stroke-width: 4; stroke-linecap: round; transition: stroke-dashoffset 0.5s ease; }
.ring-text {
  position: absolute;
  inset: 0;
  display: flex; align-items: center; justify-content: center;
  font-family: 'DM Mono', monospace;
  font-size: 13px;
  font-weight: 500;
}

.timer-display {
  display: flex; flex-direction: column; align-items: center;
}
.timer-label { font-size: 10px; color: var(--muted); text-transform: uppercase; letter-spacing: 1px; margin-top: 4px; }

.question-card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 36px;
  margin-bottom: 20px;
  animation: fadeSlide 0.4s ease;
}

@keyframes fadeSlide {
  from { opacity: 0; transform: translateY(16px); }
  to { opacity: 1; transform: translateY(0); }
}

.q-meta {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
}

.q-num {
  font-family: 'DM Mono', monospace;
  font-size: 11px;
  color: var(--gold);
  text-transform: uppercase;
  letter-spacing: 2px;
}

.q-category {
  font-size: 11px;
  font-family: 'DM Mono', monospace;
  padding: 4px 12px;
  border-radius: 100px;
  background: rgba(0,229,255,0.08);
  color: var(--cyan);
  letter-spacing: 1px;
}

.q-text {
  font-size: 18px;
  font-weight: 600;
  line-height: 1.55;
  margin-bottom: 28px;
}

.options { display: flex; flex-direction: column; gap: 12px; }

.option {
  display: flex;
  align-items: center;
  gap: 14px;
  padding: 14px 18px;
  border-radius: 10px;
  border: 1.5px solid rgba(255,255,255,0.07);
  cursor: pointer;
  transition: all 0.2s;
  background: var(--bg2);
  user-select: none;
}

.option:hover {
  border-color: rgba(240,192,64,0.3);
  background: rgba(240,192,64,0.04);
}

.option.selected {
  border-color: var(--gold);
  background: rgba(240,192,64,0.08);
}

.option.correct {
  border-color: var(--success);
  background: rgba(0,214,143,0.08);
}

.option.wrong {
  border-color: var(--danger);
  background: rgba(255,77,109,0.08);
}

.option-indicator {
  width: 22px; height: 22px;
  border-radius: 50%;
  border: 2px solid rgba(255,255,255,0.15);
  display: flex; align-items: center; justify-content: center;
  flex-shrink: 0;
  transition: all 0.2s;
  font-family: 'DM Mono', monospace;
  font-size: 11px;
  color: var(--muted);
}

.option.selected .option-indicator {
  border-color: var(--gold);
  background: var(--gold);
  color: var(--bg);
}

.option.correct .option-indicator {
  border-color: var(--success);
  background: var(--success);
  color: var(--bg);
}

.option.wrong .option-indicator {
  border-color: var(--danger);
  background: var(--danger);
  color: white;
}

.option-text { font-size: 14px; line-height: 1.5; }

.q-nav {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: 12px;
}

.btn-secondary {
  background: transparent;
  border: 1.5px solid rgba(255,255,255,0.12);
  border-radius: 8px;
  color: var(--muted);
  font-family: 'Nunito', sans-serif;
  font-size: 14px;
  font-weight: 600;
  padding: 12px 24px;
  cursor: pointer;
  transition: all 0.2s;
}

.btn-secondary:hover {
  border-color: rgba(255,255,255,0.25);
  color: var(--text);
}

.btn-gold {
  background: var(--gold);
  border: none;
  border-radius: 8px;
  color: var(--bg);
  font-family: 'Nunito', sans-serif;
  font-size: 14px;
  font-weight: 700;
  padding: 12px 28px;
  cursor: pointer;
  transition: all 0.2s;
  display: flex;
  align-items: center;
  gap: 8px;
}

.btn-gold:hover {
  background: var(--gold2);
  box-shadow: 0 8px 24px rgba(240,192,64,0.3);
}

.btn-gold:disabled {
  opacity: 0.4;
  cursor: not-allowed;
  transform: none;
  box-shadow: none;
}

.q-palette {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  padding: 20px 28px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 12px;
}

.exit-btn {
  width: 52px; height: 52px;
  border-radius: 12px;
  background: rgba(255,77,109,0.08);
  border: 1.5px solid rgba(255,77,109,0.25);
  color: var(--danger);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  font-family: 'Nunito', sans-serif;
  font-size: 12px;
  font-weight: 700;
  flex-direction: column;
  transition: all 0.2s;
}

.exit-btn:hover {
  background: rgba(255,77,109,0.15);
  border-color: rgba(255,77,109,0.5);
  transform: translateY(-1px);
  box-shadow: 0 6px 20px rgba(255,77,109,0.2);
}

.exit-btn svg { flex-shrink: 0; }
  width: 32px; height: 32px;
  border-radius: 6px;
  background: var(--bg2);
  border: 1.5px solid rgba(255,255,255,0.07);
  display: flex; align-items: center; justify-content: center;
  font-family: 'DM Mono', monospace;
  font-size: 11px;
  cursor: pointer;
  transition: all 0.15s;
  color: var(--muted);
}

.palette-dot:hover { border-color: rgba(240,192,64,0.3); }
.palette-dot.answered { background: rgba(240,192,64,0.12); border-color: var(--gold); color: var(--gold); }
.palette-dot.current { background: var(--gold); color: var(--bg); border-color: var(--gold); }

/* ============ RESULTS ============ */
#page-result { padding: 60px 20px; align-items: center; justify-content: center; }

.result-wrap { max-width: 760px; width: 100%; }

.result-hero {
  text-align: center;
  padding: 52px 40px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 20px;
  margin-bottom: 24px;
  position: relative;
  overflow: hidden;
}

.result-hero::before {
  content: '';
  position: absolute;
  top: -100px; left: 50%;
  transform: translateX(-50%);
  width: 400px; height: 400px;
  background: radial-gradient(circle, rgba(240,192,64,0.08) 0%, transparent 70%);
  pointer-events: none;
}

.result-name {
  font-family: 'DM Mono', monospace;
  font-size: 13px;
  color: var(--gold);
  letter-spacing: 2px;
  text-transform: uppercase;
  margin-bottom: 16px;
}

.score-circle {
  width: 160px; height: 160px;
  border-radius: 50%;
  border: 3px solid var(--border);
  margin: 0 auto 24px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  position: relative;
}

.score-circle svg {
  position: absolute;
  inset: -6px;
  width: calc(100% + 12px);
  height: calc(100% + 12px);
  transform: rotate(-90deg);
}

.score-ring { fill: none; stroke: var(--surface2); stroke-width: 3; }
.score-ring-fill { fill: none; stroke-width: 3; stroke-linecap: round; transition: stroke-dashoffset 2s ease; }

.score-num {
  font-family: 'Playfair Display', serif;
  font-size: 48px;
  font-weight: 900;
  line-height: 1;
}

.score-total {
  font-family: 'DM Mono', monospace;
  font-size: 13px;
  color: var(--muted);
}

.level-badge {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 8px 24px;
  border-radius: 100px;
  font-weight: 700;
  font-size: 14px;
  letter-spacing: 1px;
  text-transform: uppercase;
  margin-bottom: 16px;
}

.level-badge.high { background: rgba(0,214,143,0.12); color: var(--success); border: 1px solid rgba(0,214,143,0.25); }
.level-badge.moderate { background: rgba(240,192,64,0.12); color: var(--gold); border: 1px solid rgba(240,192,64,0.25); }
.level-badge.low { background: rgba(255,77,109,0.12); color: var(--danger); border: 1px solid rgba(255,77,109,0.25); }

.result-suggestion {
  font-size: 16px;
  color: var(--muted);
  line-height: 1.7;
  max-width: 440px;
  margin: 0 auto;
}

.result-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
  margin-bottom: 24px;
}

.result-panel {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 28px;
}

.panel-title {
  font-family: 'DM Mono', monospace;
  font-size: 11px;
  color: var(--muted);
  text-transform: uppercase;
  letter-spacing: 2px;
  margin-bottom: 20px;
}

.breakdown-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 0;
  border-bottom: 1px solid rgba(255,255,255,0.04);
  font-size: 14px;
}

.breakdown-item:last-child { border-bottom: none; }
.breakdown-label { color: var(--muted); }
.breakdown-val { font-family: 'DM Mono', monospace; color: var(--gold); font-weight: 500; }

.recommendation-item {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  margin-bottom: 14px;
}

.rec-icon { font-size: 18px; flex-shrink: 0; margin-top: 1px; }
.rec-text { font-size: 14px; line-height: 1.6; color: var(--muted); }

.result-actions {
  display: flex;
  gap: 14px;
  justify-content: center;
  margin-top: 8px;
}

@media (max-width: 600px) {
  .result-grid { grid-template-columns: 1fr; }
  .form-card { padding: 32px 24px; }
  .question-card { padding: 24px; }
  .result-actions { flex-direction: column; }
}

/* Toast */
.toast {
  position: fixed;
  bottom: 30px;
  left: 50%;
  transform: translateX(-50%) translateY(20px);
  background: var(--danger);
  color: white;
  padding: 12px 24px;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 600;
  opacity: 0;
  transition: all 0.3s;
  z-index: 999;
  pointer-events: none;
}

.toast.show {
  opacity: 1;
  transform: translateX(-50%) translateY(0);
}

/* Nav */
.nav {
  position: fixed;
  top: 0; left: 0; right: 0;
  z-index: 100;
  padding: 20px 40px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.nav-logo {
  font-family: 'Playfair Display', serif;
  font-weight: 900;
  font-size: 22px;
  color: var(--text);
}

.nav-logo span { color: var(--gold); }

.page-content { padding-top: 80px; }
</style>
</head>
<body>
<div class="noise"></div>

<nav class="nav">
  <div class="nav-logo">Placement<span>IQ</span></div>
  <div style="font-family:'DM Mono',monospace;font-size:12px;color:var(--muted);" id="nav-user-display"></div>
</nav>

<div class="toast" id="toast"></div>

<!-- LANDING -->
<div class="page active page-content" id="page-landing">
  <div class="landing-inner" style="max-width:1100px;margin:0 auto;padding:0 20px;width:100%;display:flex;align-items:center;gap:80px;">
    <div class="landing-text">
      <div class="badge">AI-Powered Assessment</div>
      <h1 class="headline">Know Your <span class="accent">Placement</span> Readiness</h1>
      <p class="landing-desc">A comprehensive skill assessment designed to evaluate your technical depth, aptitude, and domain knowledge ‚Äî giving you a clear, honest picture of where you stand.</p>
      <div class="stats-row">
        <div class="stat"><div class="stat-num">45+</div><div class="stat-label">Questions</div></div>
        <div class="stat"><div class="stat-num">3</div><div class="stat-label">Domains</div></div>
        <div class="stat"><div class="stat-num">~15</div><div class="stat-label">Minutes</div></div>
      </div>
      <button class="btn-primary" onclick="goTo('page-details')">
        Begin Assessment
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
      </button>
    </div>
    <div class="landing-visual">
      <div class="viz-card">
        <div class="viz-title">Sample Skills Profile</div>
        <div class="skill-list">
          <div class="skill-item">
            <div class="skill-name">Technical</div>
            <div class="skill-bar"><div class="skill-fill" style="width:78%"></div></div>
            <div class="skill-pct">78%</div>
          </div>
          <div class="skill-item">
            <div class="skill-name">Aptitude</div>
            <div class="skill-bar"><div class="skill-fill" style="width:65%"></div></div>
            <div class="skill-pct">65%</div>
          </div>
          <div class="skill-item">
            <div class="skill-name">Domain</div>
            <div class="skill-bar"><div class="skill-fill" style="width:82%"></div></div>
            <div class="skill-pct">82%</div>
          </div>
          <div class="skill-item">
            <div class="skill-name">Problem Solving</div>
            <div class="skill-bar"><div class="skill-fill" style="width:55%"></div></div>
            <div class="skill-pct">55%</div>
          </div>
          <div class="skill-item">
            <div class="skill-name">Communication</div>
            <div class="skill-bar"><div class="skill-fill" style="width:70%"></div></div>
            <div class="skill-pct">70%</div>
          </div>
        </div>
        <div style="margin-top:24px;padding-top:20px;border-top:1px solid var(--border);display:flex;justify-content:space-between;align-items:center;">
          <span style="font-size:12px;color:var(--muted)">Overall Readiness</span>
          <span style="font-family:'DM Mono',monospace;color:var(--gold);font-size:20px;font-weight:500">72%</span>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- DETAILS FORM -->
<div class="page form-page page-content" id="page-details">
  <div class="form-card">
    <div class="step-indicator" id="step-dots"></div>
    <div class="form-heading">Tell us about yourself</div>
    <div class="form-sub">Your information helps us personalize your assessment results.</div>

    <div class="field-row">
      <div class="field-group">
        <label class="field-label" for="f-firstname">First Name</label>
        <input class="field-input" type="text" id="f-firstname" placeholder="Arjun">
        <div class="field-error" id="err-firstname">Please enter your first name</div>
      </div>
      <div class="field-group">
        <label class="field-label" for="f-lastname">Last Name</label>
        <input class="field-input" type="text" id="f-lastname" placeholder="Sharma">
        <div class="field-error" id="err-lastname">Please enter your last name</div>
      </div>
    </div>

    <div class="field-group">
      <label class="field-label" for="f-email">Email Address</label>
      <input class="field-input" type="email" id="f-email" placeholder="arjun@college.edu">
      <div class="field-error" id="err-email">Enter a valid email address</div>
    </div>

    <div class="field-row">
      <div class="field-group">
        <label class="field-label" for="f-branch">Branch / Major</label>
        <select class="field-input" id="f-branch">
          <option value="">Select branch</option>
          <option>Computer Science</option>
          <option>Electronics</option>
          <option>Mechanical</option>
          <option>Civil</option>
          <option>MBA / Management</option>
          <option>Other</option>
        </select>
        <div class="field-error" id="err-branch">Please select your branch</div>
      </div>
      <div class="field-group">
        <label class="field-label" for="f-year">Year</label>
        <select class="field-input" id="f-year">
          <option value="">Select year</option>
          <option>1st Year</option>
          <option>2nd Year</option>
          <option>3rd Year</option>
          <option>Final Year</option>
          <option>Passed Out</option>
        </select>
        <div class="field-error" id="err-year">Please select your year</div>
      </div>
    </div>

    <div class="field-group">
      <label class="field-label" for="f-cgpa">CGPA / Percentage</label>
      <input class="field-input" type="number" id="f-cgpa" placeholder="8.5" min="0" max="10" step="0.1">
      <div class="field-error" id="err-cgpa">Enter a valid CGPA between 0 and 10</div>
    </div>

    <div class="field-group">
      <label class="field-label" for="f-exp">Work / Internship Experience</label>
      <select class="field-input" id="f-exp">
        <option value="">Select experience level</option>
        <option value="none">No experience</option>
        <option value="internship">1‚Äì2 internships</option>
        <option value="parttime">Part-time / Freelance</option>
        <option value="fulltime">Full-time work experience</option>
      </select>
      <div class="field-error" id="err-exp">Please select your experience</div>
    </div>

    <button class="btn-gold" style="width:100%;justify-content:center;margin-top:8px;" onclick="submitDetails()">
      Continue to Career Path
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
    </button>

    <div style="text-align:center;margin-top:16px;">
      <button class="btn-secondary" onclick="loadDummyData()" style="font-size:12px;padding:8px 16px;border-radius:6px;">
        ‚ú® Fill with dummy data
      </button>
    </div>
  </div>
</div>

<!-- CAREER SELECTION -->
<div class="page page-content" id="page-career" style="padding:60px 20px;">
  <div class="career-wrap">
    <div class="step-indicator" id="step-dots2" style="justify-content:center;margin-bottom:32px;"></div>
    <h2>Choose Your Career Domain</h2>
    <p>Your assessment questions will be tailored to the selected domain.</p>

    <div class="career-cards">
      <div class="career-card" onclick="selectCareer('technical', this)">
        <div class="career-icon" style="background:rgba(0,229,255,0.1);">üíª</div>
        <div class="career-card-title">Technical</div>
        <div class="career-card-desc">Software development, algorithms, databases, and systems programming roles.</div>
        <div class="career-tags">
          <span class="tag">Software Dev</span>
          <span class="tag">Data Engineering</span>
          <span class="tag">DevOps</span>
        </div>
      </div>
      <div class="career-card" onclick="selectCareer('core', this)">
        <div class="career-icon" style="background:rgba(240,192,64,0.1);">‚öôÔ∏è</div>
        <div class="career-card-title">Core Engineering</div>
        <div class="career-card-desc">Mechanical, electrical, civil and domain-specific engineering positions.</div>
        <div class="career-tags">
          <span class="tag">Manufacturing</span>
          <span class="tag">Design</span>
          <span class="tag">R&D</span>
        </div>
      </div>
      <div class="career-card" onclick="selectCareer('management', this)">
        <div class="career-icon" style="background:rgba(168,85,247,0.1);">üìä</div>
        <div class="career-card-title">Management</div>
        <div class="career-card-desc">Business analytics, HR, marketing, operations, and strategy roles.</div>
        <div class="career-tags">
          <span class="tag">HR</span>
          <span class="tag">Marketing</span>
          <span class="tag">Strategy</span>
        </div>
      </div>
    </div>

    <div class="career-cta">
      <button class="btn-gold" id="career-btn" disabled onclick="startAssessment()" style="padding:16px 48px;font-size:15px;">
        Start Assessment ‚Üí
      </button>
    </div>
  </div>
</div>

<!-- ASSESSMENT -->
<div class="page page-content" id="page-assessment">
  <div class="assessment-layout">
    <div class="assessment-header">
      <div class="assessment-meta">
        <strong id="a-name">‚Äî</strong>
        <span id="a-career-label">‚Äî</span>
      </div>
      <div class="q-palette" id="q-palette" style="flex:1;margin:0 20px;padding:12px 16px;"></div>
      <div style="display:flex;align-items:center;gap:20px;">
        <div class="timer-display">
          <div class="progress-ring">
            <svg viewBox="0 0 64 64" width="64" height="64">
              <circle class="ring-bg" cx="32" cy="32" r="28"/>
              <circle class="ring-fill" id="timer-ring" cx="32" cy="32" r="28" stroke-dasharray="176" stroke-dashoffset="0"/>
            </svg>
            <div class="ring-text" id="timer-text">15:00</div>
          </div>
          <div class="timer-label">Remaining</div>
        </div>
        <div class="timer-display">
          <button onclick="confirmExit()" class="exit-btn" title="Exit Assessment">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
              <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
              <polyline points="16 17 21 12 16 7"/>
              <line x1="21" y1="12" x2="9" y2="12"/>
            </svg>
            Exit
          </button>
          <div class="timer-label">Quit</div>
        </div>
      </div>
    </div>

    <!-- Exit Confirmation Modal -->
    <div id="exit-modal" style="display:none;position:fixed;inset:0;z-index:500;background:rgba(0,0,0,0.7);backdrop-filter:blur(6px);align-items:center;justify-content:center;">
      <div style="background:var(--surface);border:1px solid var(--border);border-radius:20px;padding:44px 40px;max-width:420px;width:90%;text-align:center;position:relative;animation:fadeSlide 0.3s ease;">
        <div style="font-size:44px;margin-bottom:16px;">üö™</div>
        <h3 style="font-family:'Playfair Display',serif;font-size:24px;margin-bottom:10px;">Exit Assessment?</h3>
        <p style="color:var(--muted);font-size:14px;line-height:1.7;margin-bottom:28px;">Your progress will be lost and your score won't be saved. Are you sure you want to leave?</p>
        <div style="display:flex;gap:12px;justify-content:center;">
          <button class="btn-secondary" onclick="closeExitModal()" style="padding:12px 28px;font-size:14px;">Keep Going</button>
          <button onclick="exitAssessment()" style="background:var(--danger);border:none;border-radius:8px;color:white;font-family:'Nunito',sans-serif;font-size:14px;font-weight:700;padding:12px 28px;cursor:pointer;transition:all 0.2s;" onmouseover="this.style.opacity='0.85'" onmouseout="this.style.opacity='1'">Yes, Exit</button>
        </div>
      </div>
    </div>

    <div id="question-area"></div>

    <div class="q-nav">
      <button class="btn-secondary" id="btn-prev" onclick="prevQuestion()">‚Üê Previous</button>
      <button class="btn-gold" id="btn-next" onclick="nextQuestion()">Next Question ‚Üí</button>
    </div>
  </div>
</div>

<!-- RESULT -->
<div class="page page-content" id="page-result">
  <div class="result-wrap">
    <div class="result-hero">
      <div class="result-name" id="r-name"></div>
      <div class="score-circle" id="score-circle">
        <svg viewBox="0 0 180 180">
          <circle class="score-ring" cx="90" cy="90" r="82"/>
          <circle class="score-ring-fill" id="score-arc" cx="90" cy="90" r="82" stroke-dasharray="515" stroke-dashoffset="515"/>
        </svg>
        <div>
          <div class="score-num" id="r-score">0</div>
          <div class="score-total" id="r-total">/30</div>
        </div>
      </div>
      <div class="level-badge" id="r-level-badge"></div>
      <p class="result-suggestion" id="r-suggestion"></p>
    </div>

    <div class="result-grid">
      <div class="result-panel">
        <div class="panel-title">Score Breakdown</div>
        <div id="r-breakdown"></div>
      </div>
      <div class="result-panel">
        <div class="panel-title">Recommendations</div>
        <div id="r-recommendations"></div>
      </div>
    </div>

    <div class="result-actions">
      <button class="btn-gold" onclick="retake()" style="padding:14px 32px;font-size:15px;">Retake Assessment</button>
      <button class="btn-secondary" onclick="goTo('page-landing')" style="padding:14px 32px;font-size:15px;">Back to Home</button>
    </div>
  </div>
</div>

<script>
// ===================== DATA =====================
const QUESTION_BANK = {
  technical: [
    { q: "What is the time complexity of binary search on a sorted array of n elements?", opts: ["O(n)", "O(log n)", "O(n log n)", "O(1)"], ans: 1, cat: "Algorithms" },
    { q: "Which data structure uses LIFO (Last In First Out) ordering?", opts: ["Queue", "Linked List", "Stack", "Heap"], ans: 2, cat: "Data Structures" },
    { q: "In Python, what does the `__init__` method do?", opts: ["It destroys an object", "It initializes a new object instance", "It creates a class", "It returns an object's type"], ans: 1, cat: "Python" },
    { q: "What does SQL JOIN operation do?", opts: ["Deletes rows from two tables", "Combines rows from two or more tables based on a condition", "Sorts data in a table", "Creates a new table"], ans: 1, cat: "Databases" },
    { q: "Which HTTP status code means 'Not Found'?", opts: ["200", "301", "403", "404"], ans: 3, cat: "Web" },
    { q: "What is a primary key in a relational database?", opts: ["A foreign reference to another table", "A unique identifier for each record", "An index used for searching", "A column that allows NULL values"], ans: 1, cat: "Databases" },
    { q: "Which sorting algorithm has the best average time complexity?", opts: ["Bubble Sort", "Selection Sort", "Merge Sort", "Insertion Sort"], ans: 2, cat: "Algorithms" },
    { q: "What is the output of: `print(type([]))`?", opts: ["<class 'tuple'>", "<class 'dict'>", "<class 'list'>", "<class 'array'>"], ans: 2, cat: "Python" },
    { q: "What does REST stand for in web development?", opts: ["Remote Execution State Transfer", "Representational State Transfer", "Reliable Session Transport", "Relational Endpoint Service Transfer"], ans: 1, cat: "Web" },
    { q: "Which data structure is best for implementing a priority queue efficiently?", opts: ["Array", "Linked List", "Binary Heap", "Hash Table"], ans: 2, cat: "Data Structures" },
    { q: "What is the purpose of an index in a database?", opts: ["To enforce data integrity", "To speed up data retrieval", "To normalize table structure", "To encrypt sensitive data"], ans: 1, cat: "Databases" },
    { q: "In OOP, what is 'encapsulation'?", opts: ["Inheriting properties from a parent class", "Hiding internal state and requiring all interaction through methods", "Overriding parent class methods", "Creating objects from a class"], ans: 1, cat: "OOP" },
    { q: "What is a race condition in concurrent programming?", opts: ["A performance benchmark", "A situation where output depends on the sequence or timing of uncontrollable events", "A deadlock between processes", "A memory overflow error"], ans: 1, cat: "Systems" },
    { q: "What does the `async/await` pattern solve in JavaScript?", opts: ["Memory management", "Synchronous blocking of I/O operations", "Asynchronous code written in a synchronous style", "Prototype chain lookups"], ans: 2, cat: "JavaScript" },
    { q: "Which layer of the OSI model handles routing between networks?", opts: ["Data Link Layer", "Transport Layer", "Network Layer", "Session Layer"], ans: 2, cat: "Networking" },
  ],
  core: [
    { q: "What is the SI unit of electric current?", opts: ["Volt", "Watt", "Ampere", "Ohm"], ans: 2, cat: "Electrical" },
    { q: "What does CAD stand for in engineering?", opts: ["Computer Aided Design", "Computer Automated Drawing", "Complex Analysis Data", "Calculated Assembly Diagram"], ans: 0, cat: "Design" },
    { q: "Which law states that stress is proportional to strain within elastic limits?", opts: ["Newton's Law", "Bernoulli's Principle", "Hooke's Law", "Faraday's Law"], ans: 2, cat: "Mechanics" },
    { q: "What is the function of a flywheel in an engine?", opts: ["To increase fuel efficiency", "To store rotational energy and smooth power delivery", "To regulate valve timing", "To cool the engine"], ans: 1, cat: "Mechanical" },
    { q: "What is Young's Modulus a measure of?", opts: ["Material hardness", "Thermal conductivity", "Stiffness / elasticity of a material", "Electrical resistance"], ans: 2, cat: "Materials" },
    { q: "Bernoulli's principle relates pressure to what other property of a flowing fluid?", opts: ["Temperature", "Velocity", "Density", "Viscosity"], ans: 1, cat: "Fluid Mechanics" },
    { q: "What type of bridge uses tension in its supporting cables?", opts: ["Arch bridge", "Truss bridge", "Cantilever bridge", "Suspension bridge"], ans: 3, cat: "Civil" },
    { q: "In thermodynamics, what does the First Law state?", opts: ["Entropy always increases", "Energy cannot be created or destroyed, only transformed", "Heat flows from cold to hot", "Pressure and volume are inversely proportional"], ans: 1, cat: "Thermodynamics" },
    { q: "What is the purpose of a P-N junction in semiconductors?", opts: ["To amplify current", "To act as a switch", "To allow current flow in one direction (rectification)", "To store electrical charge"], ans: 2, cat: "Electronics" },
    { q: "In civil engineering, what does 'grade' of concrete (e.g., M25) refer to?", opts: ["The mixing ratio", "The compressive strength in MPa", "The water-cement ratio", "The curing time in days"], ans: 1, cat: "Civil" },
    { q: "What is the purpose of tempering in metallurgy?", opts: ["To increase hardness to maximum", "To reduce brittleness after hardening", "To remove carbon from steel", "To apply a protective coating"], ans: 1, cat: "Metallurgy" },
    { q: "What type of gear converts rotational motion between perpendicular shafts?", opts: ["Spur gear", "Helical gear", "Bevel gear", "Worm gear"], ans: 2, cat: "Machine Design" },
    { q: "In an RC circuit, what happens to voltage across the capacitor as it charges?", opts: ["It decreases exponentially", "It increases linearly", "It increases exponentially toward supply voltage", "It remains constant"], ans: 2, cat: "Circuits" },
    { q: "What is the primary purpose of a heat exchanger?", opts: ["To convert heat to electricity", "To transfer heat between two fluids without mixing them", "To store thermal energy", "To measure fluid temperature"], ans: 1, cat: "Thermodynamics" },
    { q: "Which non-destructive testing method uses high-frequency sound waves?", opts: ["Radiography", "Magnetic Particle Testing", "Ultrasonic Testing", "Eddy Current Testing"], ans: 2, cat: "Quality" },
  ],
  management: [
    { q: "What does BCG Matrix stand for?", opts: ["Business Capital Growth", "Boston Consulting Group", "Basic Corporate Governance", "Budget Control Guide"], ans: 1, cat: "Strategy" },
    { q: "In Porter's Five Forces, which force considers the threat of new entrants?", opts: ["Bargaining power of suppliers", "Industry rivalry", "Barriers to entry", "Threat of substitutes"], ans: 2, cat: "Strategy" },
    { q: "What does KPI stand for?", opts: ["Key Performance Indicator", "Key Process Input", "Key Profit Index", "Knowledge Performance Insight"], ans: 0, cat: "Management" },
    { q: "What is the primary goal of Supply Chain Management?", opts: ["Maximizing production output", "Minimizing total cost while meeting customer demand", "Increasing employee count", "Maximizing inventory levels"], ans: 1, cat: "Operations" },
    { q: "Which accounting principle states revenue should be recognized when earned, not when cash is received?", opts: ["Matching Principle", "Conservatism Principle", "Accrual Principle", "Going Concern Principle"], ans: 2, cat: "Finance" },
    { q: "What is the difference between gross profit and net profit?", opts: ["They are the same thing", "Net profit deducts all expenses; gross profit only deducts cost of goods sold", "Gross profit deducts all expenses", "Net profit only applies to manufacturing firms"], ans: 1, cat: "Finance" },
    { q: "Which leadership style involves high task focus and low relationship focus?", opts: ["Transformational", "Laissez-faire", "Authoritarian/Task-oriented", "Democratic"], ans: 2, cat: "Leadership" },
    { q: "What is the SWOT analysis used for?", opts: ["Financial forecasting", "Assessing internal strengths/weaknesses and external opportunities/threats", "Calculating employee performance", "Mapping customer journeys"], ans: 1, cat: "Strategy" },
    { q: "What does CRM stand for in business context?", opts: ["Cost Reduction Management", "Customer Relationship Management", "Corporate Risk Mitigation", "Capital Resource Model"], ans: 1, cat: "Marketing" },
    { q: "The concept of 'economies of scale' refers to:", opts: ["Higher costs as production increases", "Reduced per-unit costs as production volume increases", "Fixed costs that never change", "Variable costs in manufacturing"], ans: 1, cat: "Economics" },
    { q: "In project management, what does the critical path determine?", opts: ["The most expensive task sequence", "The shortest possible project duration", "The tasks assigned to the PM", "The budget allocation order"], ans: 1, cat: "Project Management" },
    { q: "What is 'working capital'?", opts: ["Long-term investment funds", "Current assets minus current liabilities", "Net profit after tax", "Total shareholder equity"], ans: 1, cat: "Finance" },
    { q: "Which motivation theory identifies five levels including physiological and self-actualization?", opts: ["Herzberg's Two-Factor Theory", "McGregor's Theory X/Y", "Maslow's Hierarchy of Needs", "Vroom's Expectancy Theory"], ans: 2, cat: "HR" },
    { q: "What is market segmentation?", opts: ["Dividing a market into distinct subgroups with common needs", "Setting the price of a product", "Advertising to all consumers equally", "Measuring market share"], ans: 0, cat: "Marketing" },
    { q: "In financial analysis, a current ratio above 1 generally indicates:", opts: ["The company is insolvent", "The company can cover its short-term liabilities with current assets", "The company has too much debt", "The company is overstocked"], ans: 1, cat: "Finance" },
  ]
};

const APTITUDE_QUESTIONS = [
  { q: "If a train travels 360 km in 4 hours, what is its speed in km/h?", opts: ["80 km/h", "90 km/h", "100 km/h", "75 km/h"], ans: 1, cat: "Quantitative" },
  { q: "Find the missing number in the series: 2, 6, 12, 20, 30, __", opts: ["38", "40", "42", "44"], ans: 2, cat: "Series" },
  { q: "A shopkeeper sells an item at 20% profit. If the cost is ‚Çπ500, what is the selling price?", opts: ["‚Çπ550", "‚Çπ580", "‚Çπ600", "‚Çπ620"], ans: 2, cat: "Arithmetic" },
  { q: "In a group of 40 students, 60% passed. How many students failed?", opts: ["12", "16", "24", "18"], ans: 1, cat: "Percentage" },
  { q: "Two pipes fill a tank in 6 and 8 hours respectively. Together, how long to fill the tank?", opts: ["3.43 hours", "4 hours", "3 hours", "2.5 hours"], ans: 0, cat: "Work & Time" },
  { q: "What comes next: AZ, BY, CX, DW, __", opts: ["EV", "FU", "EW", "FV"], ans: 0, cat: "Letter Series" },
  { q: "If 5x + 3 = 23, what is x?", opts: ["3", "4", "5", "6"], ans: 1, cat: "Algebra" },
  { q: "A car depreciates 10% per year. If worth ‚Çπ1,00,000 today, what is its value after 2 years?", opts: ["‚Çπ80,000", "‚Çπ81,000", "‚Çπ82,000", "‚Çπ85,000"], ans: 1, cat: "Depreciation" },
  { q: "If all Bloos are Wumps, and some Wumps are Floops, then:", opts: ["All Bloos are Floops", "Some Bloos are Floops", "No Bloos are Floops", "Cannot be determined"], ans: 3, cat: "Logical" },
  { q: "In a 100m race, A beats B by 10m and B beats C by 10m. By how much does A beat C?", opts: ["19m", "20m", "21m", "18m"], ans: 0, cat: "Races" },
];

// ===================== STATE =====================
let state = {
  user: {},
  career: null,
  questions: [],
  answers: {},
  currentQ: 0,
  timerInterval: null,
  timeLeft: 900,
  totalTime: 900
};

// ===================== NAVIGATION =====================
function goTo(pageId) {
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.getElementById(pageId).classList.add('active');
  window.scrollTo(0, 0);
  updateStepDots(pageId);
}

function updateStepDots(pageId) {
  const pages = ['page-landing', 'page-details', 'page-career', 'page-assessment', 'page-result'];
  const idx = pages.indexOf(pageId);
  ['step-dots', 'step-dots2'].forEach(id => {
    const el = document.getElementById(id);
    if (!el) return;
    el.innerHTML = '';
    pages.slice(1, 5).forEach((_, i) => {
      const dot = document.createElement('div');
      dot.className = 'step-dot';
      dot.style.width = '40px';
      if (i < idx) dot.classList.add('done');
      if (i === idx - 1) dot.classList.add('active');
      el.appendChild(dot);
    });
  });
}

// ===================== DUMMY DATA =====================
const dummyUsers = [
  { fname: 'Priya', lname: 'Nair', email: 'priya.nair@college.edu', branch: 'Computer Science', year: 'Final Year', cgpa: '8.7', exp: 'internship' },
  { fname: 'Rohit', lname: 'Menon', email: 'rohit.menon@iit.ac.in', branch: 'Electronics', year: 'Final Year', cgpa: '7.9', exp: 'none' },
  { fname: 'Sneha', lname: 'Krishnan', email: 'sneha.k@university.edu', branch: 'MBA / Management', year: 'Passed Out', cgpa: '9.2', exp: 'fulltime' },
];

function loadDummyData() {
  const u = dummyUsers[Math.floor(Math.random() * dummyUsers.length)];
  document.getElementById('f-firstname').value = u.fname;
  document.getElementById('f-lastname').value = u.lname;
  document.getElementById('f-email').value = u.email;
  document.getElementById('f-branch').value = u.branch;
  document.getElementById('f-year').value = u.year;
  document.getElementById('f-cgpa').value = u.cgpa;
  document.getElementById('f-exp').value = u.exp;
  showToast('‚ú® Dummy data loaded!', 'success');
}

// ===================== VALIDATION =====================
function showError(id, show) {
  const err = document.getElementById('err-' + id);
  const inp = document.getElementById('f-' + id);
  if (err) err.classList.toggle('show', show);
  if (inp) inp.classList.toggle('error', show);
  return show;
}

function submitDetails() {
  let hasError = false;
  const fn = document.getElementById('f-firstname').value.trim();
  const ln = document.getElementById('f-lastname').value.trim();
  const email = document.getElementById('f-email').value.trim();
  const branch = document.getElementById('f-branch').value;
  const year = document.getElementById('f-year').value;
  const cgpa = document.getElementById('f-cgpa').value;
  const exp = document.getElementById('f-exp').value;

  if (!fn) hasError = showError('firstname', true) || hasError;
  else showError('firstname', false);
  if (!ln) hasError = showError('lastname', true) || hasError;
  else showError('lastname', false);

  const emailValid = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
  if (!emailValid) hasError = showError('email', true) || hasError;
  else showError('email', false);

  if (!branch) hasError = showError('branch', true) || hasError;
  else showError('branch', false);
  if (!year) hasError = showError('year', true) || hasError;
  else showError('year', false);

  const cgpaNum = parseFloat(cgpa);
  if (!cgpa || isNaN(cgpaNum) || cgpaNum < 0 || cgpaNum > 10) hasError = showError('cgpa', true) || hasError;
  else showError('cgpa', false);

  if (!exp) hasError = showError('exp', true) || hasError;
  else showError('exp', false);

  if (hasError) { showToast('Please fix the errors above'); return; }

  state.user = { firstName: fn, lastName: ln, fullName: fn + ' ' + ln, email, branch, year, cgpa: cgpaNum, exp };
  document.getElementById('nav-user-display').textContent = fn + ' ' + ln;
  goTo('page-career');
}

// ===================== CAREER SELECTION =====================
function selectCareer(career, el) {
  state.career = career;
  document.querySelectorAll('.career-card').forEach(c => c.classList.remove('selected'));
  el.classList.add('selected');
  document.getElementById('career-btn').disabled = false;
}

function startAssessment() {
  if (!state.career) { showToast('Please select a career domain'); return; }

  const domainQs = shuffle([...QUESTION_BANK[state.career]]).slice(0, 10);
  const aptQs = shuffle([...APTITUDE_QUESTIONS]).slice(0, 5);
  state.questions = [...domainQs, ...aptQs];
  state.answers = {};
  state.currentQ = 0;
  state.timeLeft = 900;
  state.totalTime = 900;

  const careerLabels = { technical: 'Technical Domain', core: 'Core Engineering', management: 'Management' };
  document.getElementById('a-name').textContent = state.user.fullName;
  document.getElementById('a-career-label').textContent = careerLabels[state.career] + ' ¬∑ ' + state.questions.length + ' questions';

  buildPalette();
  renderQuestion();
  startTimer();
  goTo('page-assessment');
}

function shuffle(arr) {
  for (let i = arr.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
  return arr;
}

// ===================== PALETTE =====================
function buildPalette() {
  const palette = document.getElementById('q-palette');
  palette.innerHTML = '';
  state.questions.forEach((_, i) => {
    const dot = document.createElement('div');
    dot.className = 'palette-dot' + (i === 0 ? ' current' : '');
    dot.id = 'pd-' + i;
    dot.textContent = i + 1;
    dot.onclick = () => jumpToQ(i);
    palette.appendChild(dot);
  });
}

function updatePalette() {
  state.questions.forEach((_, i) => {
    const dot = document.getElementById('pd-' + i);
    if (!dot) return;
    dot.className = 'palette-dot';
    if (i === state.currentQ) dot.classList.add('current');
    else if (state.answers[i] !== undefined) dot.classList.add('answered');
  });
}

function jumpToQ(i) {
  state.currentQ = i;
  renderQuestion();
}

// ===================== QUESTION RENDERING =====================
function renderQuestion() {
  const q = state.questions[state.currentQ];
  const total = state.questions.length;
  const area = document.getElementById('question-area');

  area.innerHTML = `
    <div class="question-card">
      <div class="q-meta">
        <div class="q-num">Question ${state.currentQ + 1} / ${total}</div>
        <div class="q-category">${q.cat}</div>
      </div>
      <div class="q-text">${q.q}</div>
      <div class="options" id="options-container">
        ${q.opts.map((opt, i) => `
          <div class="option ${state.answers[state.currentQ] === i ? 'selected' : ''}" onclick="selectAnswer(${i})" id="opt-${i}">
            <div class="option-indicator">${String.fromCharCode(65 + i)}</div>
            <div class="option-text">${opt}</div>
          </div>
        `).join('')}
      </div>
    </div>`;

  document.getElementById('btn-prev').disabled = state.currentQ === 0;
  document.getElementById('btn-next').textContent = state.currentQ === total - 1 ? 'Submit Assessment ‚úì' : 'Next Question ‚Üí';
  updatePalette();
}

function selectAnswer(optIdx) {
  state.answers[state.currentQ] = optIdx;
  document.querySelectorAll('.option').forEach((el, i) => {
    el.classList.toggle('selected', i === optIdx);
  });
  updatePalette();
}

function nextQuestion() {
  if (state.currentQ < state.questions.length - 1) {
    state.currentQ++;
    renderQuestion();
  } else {
    const answered = Object.keys(state.answers).length;
    const unanswered = state.questions.length - answered;
    if (unanswered > 0) {
      if (!confirm(`You have ${unanswered} unanswered question(s). Submit anyway?`)) return;
    }
    submitAssessment();
  }
}

function prevQuestion() {
  if (state.currentQ > 0) { state.currentQ--; renderQuestion(); }
}

// ===================== TIMER =====================
function startTimer() {
  clearInterval(state.timerInterval);
  state.timerInterval = setInterval(() => {
    state.timeLeft--;
    updateTimerDisplay();
    if (state.timeLeft <= 0) {
      clearInterval(state.timerInterval);
      showToast('‚è∞ Time is up!');
      submitAssessment();
    }
  }, 1000);
}

function updateTimerDisplay() {
  const m = Math.floor(state.timeLeft / 60);
  const s = state.timeLeft % 60;
  document.getElementById('timer-text').textContent = m + ':' + String(s).padStart(2, '0');

  const pct = state.timeLeft / state.totalTime;
  const circumference = 176;
  document.getElementById('timer-ring').style.strokeDashoffset = circumference * (1 - pct);
  document.getElementById('timer-ring').style.stroke = pct > 0.5 ? 'var(--gold)' : pct > 0.25 ? '#ff9500' : 'var(--danger)';
}

// ===================== SCORING & RESULTS =====================
function submitAssessment() {
  clearInterval(state.timerInterval);

  let domainScore = 0, aptScore = 0;
  const domainTotal = 10, aptTotal = 5;

  state.questions.forEach((q, i) => {
    const correct = state.answers[i] === q.ans;
    if (i < 10 && correct) domainScore++;
    if (i >= 10 && correct) aptScore++;
  });

  const cgpaBonus = state.user.cgpa >= 8 ? 2 : state.user.cgpa >= 7 ? 1 : 0;
  const expBonus = state.user.exp === 'fulltime' ? 2 : state.user.exp === 'internship' ? 1 : 0;

  const rawScore = domainScore + aptScore + cgpaBonus + expBonus;
  const maxScore = domainTotal + aptTotal + 4;
  const pct = Math.round((rawScore / maxScore) * 100);

  let level, levelClass, suggestion, recs;
  if (pct >= 70) {
    level = 'Placement Ready';
    levelClass = 'high';
    suggestion = 'Outstanding performance! You demonstrate strong domain knowledge and quantitative aptitude. Focus on polishing communication and interview skills.';
    recs = [
      { icon: 'üéØ', text: 'Start applying to top-tier companies in your domain.' },
      { icon: 'üí¨', text: 'Practice mock interviews and behavioral questions (STAR method).' },
      { icon: 'üìù', text: 'Fine-tune your resume and LinkedIn with quantifiable achievements.' },
      { icon: 'ü§ù', text: 'Attend networking events and college placement drives.' },
    ];
  } else if (pct >= 45) {
    level = 'Developing';
    levelClass = 'moderate';
    suggestion = 'A solid foundation is visible, but there are clear areas to strengthen. With focused effort over 4‚Äì6 weeks, you can significantly improve your readiness.';
    recs = [
      { icon: 'üìö', text: 'Revisit core concepts in your domain ‚Äî aim for 1 hour daily.' },
      { icon: 'üßÆ', text: 'Practice aptitude problems on platforms like IndiaBix or PrepInsta.' },
      { icon: 'üõ†Ô∏è', text: 'Work on 1‚Äì2 projects to showcase practical skills.' },
      { icon: 'üìà', text: 'Track your CGPA ‚Äî a score above 7.5 strengthens shortlisting chances.' },
    ];
  } else {
    level = 'Needs Work';
    levelClass = 'low';
    suggestion = 'Your results suggest the need for a focused preparation phase. Don\'t be discouraged ‚Äî with a structured plan you can turn this around in 2‚Äì3 months.';
    recs = [
      { icon: 'üèóÔ∏è', text: 'Build fundamentals from scratch ‚Äî use structured courses on NPTEL or Coursera.' },
      { icon: 'üîÅ', text: 'Solve 10 aptitude problems daily, covering time-work, ratios, and series.' },
      { icon: 'ü§≤', text: 'Seek guidance from faculty, seniors, or a placement mentor.' },
      { icon: 'üéì', text: 'Focus on CGPA improvement alongside skill development.' },
    ];
  }

  // Render results
  document.getElementById('r-name').textContent = `${state.user.fullName} ¬∑ ${['technical','core','management'].includes(state.career) ? {technical:'Technical',core:'Core Engineering',management:'Management'}[state.career] : ''} Assessment`;

  const scoreEl = document.getElementById('r-score');
  const targetScore = rawScore;
  let count = 0;
  const counter = setInterval(() => {
    count++;
    scoreEl.textContent = count;
    if (count >= targetScore) clearInterval(counter);
  }, 60);

  document.getElementById('r-total').textContent = `/ ${maxScore}`;

  const badge = document.getElementById('r-level-badge');
  badge.textContent = level;
  badge.className = 'level-badge ' + levelClass;

  document.getElementById('r-suggestion').textContent = suggestion;

  const scoreArc = document.getElementById('score-arc');
  const circumference = 515;
  scoreArc.style.stroke = pct >= 70 ? 'var(--success)' : pct >= 45 ? 'var(--gold)' : 'var(--danger)';
  setTimeout(() => {
    scoreArc.style.strokeDashoffset = circumference * (1 - rawScore / maxScore);
  }, 300);

  document.getElementById('r-breakdown').innerHTML = `
    <div class="breakdown-item"><span class="breakdown-label">Domain Score</span><span class="breakdown-val">${domainScore}/${domainTotal}</span></div>
    <div class="breakdown-item"><span class="breakdown-label">Aptitude Score</span><span class="breakdown-val">${aptScore}/${aptTotal}</span></div>
    <div class="breakdown-item"><span class="breakdown-label">CGPA Bonus</span><span class="breakdown-val">+${cgpaBonus}</span></div>
    <div class="breakdown-item"><span class="breakdown-label">Experience Bonus</span><span class="breakdown-val">+${expBonus}</span></div>
    <div class="breakdown-item"><span class="breakdown-label">CGPA</span><span class="breakdown-val">${state.user.cgpa}</span></div>
    <div class="breakdown-item"><span class="breakdown-label">Overall Score</span><span class="breakdown-val" style="color:var(--text);font-size:16px;">${pct}%</span></div>
  `;

  document.getElementById('r-recommendations').innerHTML = recs.map(r =>
    `<div class="recommendation-item"><div class="rec-icon">${r.icon}</div><div class="rec-text">${r.text}</div></div>`
  ).join('');

  goTo('page-result');
}

function confirmExit() {
  const modal = document.getElementById('exit-modal');
  modal.style.display = 'flex';
}

function closeExitModal() {
  document.getElementById('exit-modal').style.display = 'none';
}

function exitAssessment() {
  clearInterval(state.timerInterval);
  state.answers = {};
  state.currentQ = 0;
  document.getElementById('exit-modal').style.display = 'none';
  goTo('page-career');
  showToast('Assessment exited. Select a domain to restart.', 'error');
}

function retake() {
  state.answers = {};
  state.currentQ = 0;
  goTo('page-career');
}

// ===================== TOAST =====================
function showToast(msg, type = 'error') {
  const toast = document.getElementById('toast');
  toast.textContent = msg;
  toast.style.background = type === 'success' ? 'var(--success)' : 'var(--danger)';
  toast.classList.add('show');
  setTimeout(() => toast.classList.remove('show'), 3000);
}

// ===================== INIT =====================
updateStepDots('page-landing');
updateTimerDisplay();
</script>
</body>
</html>
